--[[功能：活动系统类（服务器）版本：v1.0作者：粟宇征时间: 2013-03-12]]_G.CActiveSystem = {};function CActiveSystem:new()	local obj = CSystem:new("CActiveSystem");	for index, value in pairs(CActiveSystem) do		if type(value) == "function" then			obj[index] = value;		end;	end;	return obj;end;----------------------------------------------------------------------------------function CActiveSystem:Create()--	print('CActiveSystem:Create:Start')	--获取Player	local objPlayer = self:GetPlayer();	if not objPlayer then		_err("CActiveSystem Create Cannot get player");		return false;	end;	return true;end;function CActiveSystem:OnEnterScene()	local tData = CActiveSystemMgr:GetStarted();	for _,v in ipairs(tData) do		self:StartTime(v);	endendfunction CActiveSystem:Destroy()end;--ks 响应--活动开启function CActiveSystem:StartTime(arg)	--print('CActiveSystem:StartTime(arg)~~~~~~1')	if not _G.MovementConfig[arg.dwID] then return end;	--print('CActiveSystem:StartTime(arg)~~~~~~2')	--活动开启时脚本处理	if _G.MovementConfig[arg.dwID].FunOnStart then		_G.MovementConfig[arg.dwID].FunOnStart(arg,CActiveSystemMgr,CScriptManager);	end	--其他处理	CActiveSystemMgr:Start(arg.dwID,arg.dwIndex);	--通知客户端活动开启	self:GetPlayer().OnStartTimeMsg{ dwID = arg.dwID, dwIndex = arg.dwIndex, tParam = _G.MovementConfig[arg.dwID].tTipConfig}end--活动关闭function CActiveSystem:EndTime(arg)	if not _G.MovementConfig[arg.dwID] then return end;	--活动开启时脚本处理	if _G.MovementConfig[arg.dwID].FunOnEnd then		_G.MovementConfig[arg.dwID].FunOnEnd(arg,CActiveSystemMgr,CScriptManager);	end	--其他处理	CActiveSystemMgr:End(arg.dwID,arg.dwIndex);	--通知客户端活动开启	self:GetPlayer().OnEndTimeMsg{ dwID = arg.dwID, dwIndex = arg.dwIndex, tParam = {}}end----------------------------------------------------------------------