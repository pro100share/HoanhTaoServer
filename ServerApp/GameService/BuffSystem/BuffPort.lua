--Buff脚本用的接口-- function CBuffSystem:ExecAddBuffEffect(propertyType, value, dwBuffID)		-- local objPlayer = self:GetPlayer();	-- if not objPlayer then		-- return;	-- end;	-- local attrInfo = _G.SSingleAttrChange:new();	-- attrInfo[propertyType] = value;	-- local skillSystem = objPlayer:GetSystem("CSkillSystem");	-- skillSystem:NotifyBuffUpdate(dwBuffID,attrInfo)	-- --skillSystem:ChangeAttr(propertyType, value);	-- --可能是掉血,也可能是一些别的效果(具体内容和策划核对)-- end;--添加属性--tbAttr：属性table--dwBuffIDfunction CBuffSystem:ExecAddBuffEffect(tbAttr, dwBuffID)		local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local attrInfo = _G.SSingleAttrChange:new();	attrInfo:Copy(tbAttr);	objPlayer:GetSystem("CSkillSystem"):NotifyBuffUpdate(dwBuffID,attrInfo);end;--添加百分比属性--tbAttr：属性table--dwBuffIDfunction CBuffSystem:ExecAddBuffPercent(tbAttr, dwBuffID)		local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local attrInfo = _G.SSingleAttrChange:new();	attrInfo:Copy(tbAttr);	objPlayer:GetSystem("CSkillSystem"):NotifyBuffUpdate(dwBuffID,attrInfo,true);end;--删除buff的时候调用，删除buff添加的属性function CBuffSystem:ExecDelBuffEffect(dwBuffID)	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	objPlayer:GetSystem("CSkillSystem"):NotifyBuffUpdate(dwBuffID,nil);	objPlayer:GetSystem("CSkillSystem"):NotifyBuffUpdate(dwBuffID,nil,true);end;--修改HP，返回本次修改的值--dwType,dwID：修改他HP的对象function CBuffSystem:ChangeHp(dwValue,dwType,dwID)	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local skillSystem = objPlayer:GetSystem("CSkillSystem");		return skillSystem:ChgHP(dwValue,false,dwType,dwID);end;--修改MP，返回本次修改的值--dwType,dwID：修改他MP的对象function CBuffSystem:ChangeMp(dwValue,dwType,dwID)	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local skillSystem = objPlayer:GetSystem("CSkillSystem");		return skillSystem:ChgMP(dwValue,false,dwType,dwID);end;--获得怪物的属性function CBuffSystem:GetBattleInfo()	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local skillSystem = objPlayer:GetSystem("CSkillSystem");		return skillSystem:GetInfo();end;--死亡判断function CBuffSystem:IsDead()	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;		return objPlayer:GetSystem("CStateSystem").dwCurState == enPlayerState.ePS_Dead;end;function CBuffSystem:GetOtherPlayer(dwRoleID)	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local objMap = objPlayer:GetSystem("CMapSystem"):GetCurMap();	return objMap:GetPlayerByRoleID(dwRoleID);end;--获得释放buff的类型和idfunction CBuffSystem:GetReleaseObj(buffId)	local buff = self:GetBuffObj(buffId);	return buff.m_releaseType, buff.m_releaseId;end;--修改宠物HP，返回本次修改的值--dwType,dwID：修改他HP的对象function CBuffSystem:ChangePetHp(dwValue,dwType,dwID)	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local petSystem = objPlayer:GetSystem("CPetSystem");		local outputPet = petSystem:GetOutPetObject();	if not outputPet then 		return 	end;	return outputPet:ChgHPByMedica(dwValue)end;--得到宠物的战斗信息function CBuffSystem:GetPetBattleInfo()	local objPlayer = self:GetPlayer();	if not objPlayer then		return;	end;	local petSystem = objPlayer:GetSystem("CPetSystem");		local outputPet = petSystem:GetOutPetObject();	if not outputPet then return end		return outputPet:GetBattleInfo();end;