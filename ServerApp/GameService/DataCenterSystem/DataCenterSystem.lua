--[[功能：数据中心系统类（服务器）版本：v1.0作者：郭肇义时间：2012-04-14]]_G.CDataCenterSystem = {};function CDataCenterSystem:new()	local obj = CSystem:new("CDataCenterSystem")	for i,v in pairs(CDataCenterSystem) do		if type(v) == "function" then obj[i] = v end	end	return objend----------------------------------------------------------------------------------function CDataCenterSystem:Create()	local objDB = self:GetPlayer():GetDBQuery()	self.objDB = CDataCenterSystemDB:new(objDB,self)	self.tabData = self:GetPlayer():GetLineData("CDataCenterSystem")[1]	return trueend;function CDataCenterSystem:Update(dwInterval)	return trueend;function CDataCenterSystem:Destroy()end;function CDataCenterSystem:OnChangeLineBegin()	self:GetPlayer():SetLineData("CDataCenterSystem",self.tabData)end------------------------------------------------------------------------------------接口------------------------------------------------------------------------------------获取数据function CDataCenterSystem:GetData(szIndex)	if not szIndex then return self.tabData end	return self.tabData[szIndex] or 0end--设置数据function CDataCenterSystem:SetData(szIndex,uValue)	self.tabData[szIndex] = uValue	self.objDB:SetData(szIndex,uValue)	local tabData = { [szIndex] = uValue }	self:GetPlayer().OnSyncDataCenterMsg{ Data = tabData }end------------------------------------------------------------------------------------响应----------------------------------------------------------------------------------function CDataCenterSystem:EventKillMonster(dwTimes,dwMonsterID)	local objMap = self:GetPlayer():GetSystem("CMapSystem"):GetCurMap()	local objMonster = objMap:GetMonsterMgr():GetMonsterInfoById(dwMonsterID)	if not objMonster then		return;	end	if objMonster:IsBoss() and objMonster:IsTaskBoss()==false then		local dwKillBoss = self.tabData.dwKillBoss or 0		self:SetData('dwKillBoss',dwKillBoss + dwTimes)	endendfunction CDataCenterSystem:EventKillPlayer(dwTimes)	local dwKillPlayer = self.tabData.dwKillPlayer or 0	self:SetData('dwKillPlayer',dwKillPlayer + dwTimes)end----------------------------------------------------------------------------------