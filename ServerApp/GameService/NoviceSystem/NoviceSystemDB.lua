--[[功能：新手引导系统数据库操作版本：v1.0作者：郭肇义时间：2012-03-22]]_G.CNoviceSystemDB = {}--创建系统数据库function CNoviceSystemDB:new(objDB, objSys)	local obj = {}	obj.m_ObjDB = objDB;	obj.m_ObjSys = objSys;	for i, v in pairs(CNoviceSystemDB) do		if type(v) == "function" then			obj[i] = v;		end;	end;	return obj;end;--检查系统数据库模块有效性function CNoviceSystemDB:CheckDBValidityAndGetRoleID()	if not self.m_ObjDB then		_info("self.m_ObjDB is null by CNoviceSystemDB");		return false;	end;	if not self.m_ObjSys then		_info("self.m_ObjSys is null by CNoviceSystemDB");		return false;	end;	local objPlayer = self.m_ObjSys:GetPlayer();	if not objPlayer then		_info("objPlayer is null by CNoviceSystemDB");		return false;	end;    local dwRoleID = objPlayer:GetRoleID();	if dwRoleID == 0 then		_info("dwRoleID == 0  by CNoviceSystemDB");		return false;	end;	return true, dwRoleID;end;--设置引导事件信息function CNoviceSystemDB:AddFinishedGuide(dwGuideID)	local bValidity, dwRoleID = self:CheckDBValidityAndGetRoleID();	if not bValidity then		_info("DB invalidity by CNoviceSystemDB:UpdateGuideInfo");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateInsertCmd('T_Role_NoviceGuide_New')	SqlCmd.Fields.dwRoleID = dwRoleID	SqlCmd.Fields.dwGuideID = dwGuideID	SqlCmd:execute()end