--[[功能：天官赐福系统数据库操作版本：	v1.0	2012-05-30 create by lkj]]_G.CTianGuanCiFuSystemDB = {}function CTianGuanCiFuSystemDB:new(objDB, objSys)	local obj = {}	obj.m_ObjDB = objDB;	obj.m_ObjSys = objSys;	for i, v in pairs(CTianGuanCiFuSystemDB) do		if type(v) == "function" then			obj[i] = v;		end;	end;	return obj;end;--检查系统数据库模块有效性function CTianGuanCiFuSystemDB:CheckDBValidityAndGetRoleID()	if not self.m_ObjDB then		_info("self.m_ObjDB is null by CTianGuanCiFuSystemDB");		return false;	end;	if not self.m_ObjSys then		_info("self.m_ObjSys is null by CTianGuanCiFuSystemDB");		return false;	end;	local objPlayer = self.m_ObjSys:GetPlayer();	if not objPlayer then		_info("objPlayer is null by CTianGuanCiFuSystemDB");		return false;	end;    local dwRoleID = objPlayer:GetRoleID();	if dwRoleID == 0 then		_info("dwRoleID == 0  by CTianGuanCiFuSystemDB");		return false;	end;	return true, dwRoleID;end;--update装备升阶天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_EquipUpGrade(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_EquipUpGrade");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_EquipUpGrade = n_Value;		SqlCmd:execute()	return true;end;--update坐骑升阶天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_MountUpGrade(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_MountUpGrade");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_MountUpGrade = n_Value;		SqlCmd:execute()	return true;end;--update境界升级天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_JingJieUp(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_JingJieUp");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_JingJieUp = n_Value;		SqlCmd:execute()	return true;end;--update护身宝甲升阶天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_AmuletUpGrade(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_AmuletUpGrade");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_AmuletUpGrade = n_Value;		SqlCmd:execute()	return true;end;--update宝剑升阶天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_SwordUpGrade(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_SwordUpGrade");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_SwordUpGrade = n_Value;		SqlCmd:execute()	return true;end;--update装备升阶天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_EquipStrong(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_EquipStrong");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_EquipStrong = n_Value;		SqlCmd:execute()	return true;end;--update领悟功法天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_KungFuStudy(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_KungFuStudy");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_KungFuStudy = n_Value;		SqlCmd:execute()	return true;end;--update杀人如麻境界天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_MegaKill(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_MegaKill");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_MegaKill = n_Value;		SqlCmd:execute()	return true;end;--update暗器系统天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_HiddenWeapon(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_HiddenWeapon");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_HiddenWeapon = n_Value;		SqlCmd:execute()	return true;end;--update战骑诀天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_ZhanQiJue(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_ZhanQiJue");		return false;	end	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");	SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_ZhanQiJue = n_Value;	SqlCmd:execute();		return true;end--update领悟功法天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_GoldenBody(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_KungFuStudy");		return false;	end;	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");		SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_GoldenBody = n_Value;		SqlCmd:execute()	return true;end;--update战旗天官赐福值到数据库function CTianGuanCiFuSystemDB:Update_Banner(n_Value)	local validity, RoleID = self:CheckDBValidityAndGetRoleID();	if not validity then 		_err("DB invalidity by CTianGuanCiFuSystemDB:Update_Banner");		return false;	end	local SqlCmd = self.m_ObjDB:CreateUpdateCmd("T_Role_TianGuanCiFu");	SqlCmd.Wheres.n_RoleID = RoleID;	SqlCmd.Fields.n_Banner = n_Value;	SqlCmd:execute();		return true;end