_G.CRefreshSystem = {};-----------------------------------------------------------------------------------------------function CRefreshSystem:new()	local obj = CSystem:new("CRefreshSystem");	for index, value in pairs(CRefreshSystem) do		if type(value) == "function" then			obj[index] = value;		end;	end;	return obj;end;-----------------------------------------------------------------------------------------------function CRefreshSystem:Create()	self.objQuery = CRefreshSystemDB:new(self:GetPlayer());		self.tabData = {}	local tabData = self:GetPlayer():GetLineData("CRefreshSystem")[1];	for dwDataID,tabInfo in pairs(tabData or {}) do		local tabConfig = RefreshConfig[dwDataID];		if tabConfig then			local dwUpdate = CRefreshManager:GetLastUpdate(dwDataID);			local tabTemp = {};			if (tabConfig.bNoUpdate) or (tabInfo.dwUpdate > dwUpdate) then				tabTemp.dwValue = tabInfo.dwValue;				tabTemp.dwUpdate = tabInfo.dwUpdate;			else				tabTemp.dwValue = tabConfig.dwValue;				tabTemp.dwUpdate = dwUpdate;			end			self.tabData[dwDataID] = tabTemp;		else			self.objQuery:DelData(dwDataID);		end	end		return true;end;function CRefreshSystem:OnChangeLineBegin()	self:GetPlayer():SetLineData("CRefreshSystem",self.tabData);end;-----------------------------------------------------------------------------------------------function CRefreshSystem:SetData(dwDataID,dwValue)	local tabConfig = RefreshConfig[dwDataID];	if not tabConfig then return end;	local tabInfo = self.tabData[dwDataID];	if tabInfo then		self.objQuery:SetData(dwDataID,dwValue);	else		tabInfo = {};		self.tabData[dwDataID] = tabInfo;		self.objQuery:AddData(dwDataID,dwValue);	end	tabInfo.dwValue = dwValue;	tabInfo.dwUpdate = GetCurTime();endfunction CRefreshSystem:GetData(dwDataID)	local tabConfig = RefreshConfig[dwDataID];	if not tabConfig then return end;	local tabInfo = self.tabData[dwDataID] or {};	return tabInfo.dwValue or tabConfig.dwValue;endfunction CRefreshSystem:UpdateData(dwDataID,dwValue)	local tabInfo = self.tabData[dwDataID];	if tabInfo then		tabInfo.dwValue = dwValue;		tabInfo.dwUpdate = GetCurTime();	end	local objSys = self:GetPlayer():GetSystem("CPlayerEventCenterSystem");	objSys:DoEvent("EventRefreshData",dwDataID,dwValue);end-----------------------------------------------------------------------------------------------