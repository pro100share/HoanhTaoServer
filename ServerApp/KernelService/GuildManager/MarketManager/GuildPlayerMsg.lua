------------------------------------------------------------------------------------购买物品function CGuildPlayerMsg:BuyItem(dwItemEnum)	--check	local dwRoleID = self.dwSrcID	local objMember = CGuildMemberMgr:Get(dwRoleID)	if not objMember then return end	local dwGuildID = objMember.dwGuildID	local objGuild = CGuildInfoMgr:Get(dwGuildID)	if not objGuild then return end	local objItem = CGuildMarketMgr:Get(dwGuildID,dwItemEnum)	if not objItem then return end	if objItem.dwItemNumber <= 0 then return end	local dwLevel,dwContribute	for k,v in pairs(GuildShopConfig) do		if v.dwItemEnum == dwItemEnum then			dwLevel = v.dwGuildLevel			dwContribute = v.dwContribute		end	end	if (not dwContribute) or (not dwLevel) then return end	if objGuild.dwLevel < dwLevel then return end	if objMember.dwContribute < dwContribute then return end	--execute	objMember.dwContribute = objMember.dwContribute - dwContribute	objMember:Update()	objItem.dwItemNumber = objItem.dwItemNumber - 1	objItem:Update()	--record	local fnConfirm = function()		local tabRefresh = { dwContribute = objMember.dwContribute }		self:NotifyPlayer(dwRoleID,'OnRefreshPlayer',tabRefresh)	end	local fnCancel = function()		local objMember = CGuildMemberMgr:Get(dwRoleID)		objMember.dwContribute = objMember.dwContribute + dwContribute		objMember:Update()		local objItem = CGuildMarketMgr:Get(dwGuildID,dwItemEnum)		objItem.dwItemNumber = objItem.dwItemNumber + 1		objItem:Update()	end	local dwRecordID = CGuildRecord:Insert(fnConfirm,fnCancel)	--notify	self:NotifyPlayer(dwRoleID,'OnBuyItem',dwItemEnum,dwRecordID)end----------------------------------------------------------------------------------