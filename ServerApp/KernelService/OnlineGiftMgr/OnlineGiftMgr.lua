--[[功能：全局在线时长领奖管理器类型：继承于CSingle类，用来管理玩家在线时长领奖定时刷新版本：	v1.0	2013-06-28 create by lkj]]_G.COnlineGiftMgr = CSingle:new();CSingleManager:AddSingle(COnlineGiftMgr);--createfunction COnlineGiftMgr:Create()		--初始化计时器	CAlarmClock:AddTask({dwTime = "24:00"}, CAlarmTaskCycleType.eDay, 1, 0,		function() self:ResetValue() end, {}	)	return true;end;--重置function COnlineGiftMgr:ResetValue()	local str = "";	local formatStr = "%d,%d;"	for i=1, _G.OnLineGiftConfig.GiftNum do		local str1 = string.format(formatStr, i, 0);		str = str .. str1;	end;	CPlayerDBQuery:GetDBQuery():execute('UPDATE "T_Role_OnlineGift" SET "dwOnlineTime"=$1, "szAward"=$2', 0, str);	for i,objLine in pairs(CGameLineManager:GetAllLine()) do		objLine.GSRemoteCallMsg{System = "COnlineGiftSystem", Func = "Reset"};	end;	end;